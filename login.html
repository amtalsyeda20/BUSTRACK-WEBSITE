<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Signup - TrackBus</title>

<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif;}
  body {
    background: url('images/logo 6.jpg') no-repeat center/cover;
    height: 100vh;
    display: flex; justify-content:center; align-items:center;
    color:#fff; overflow:hidden; position:relative;
  }
  body::before {
    content:''; position:absolute; top:0; left:0; width:100%; height:100%;
    background:linear-gradient(to right, rgba(0,0,0,0.85), rgba(0,0,0,0.3)); z-index:0;
  }

  .container {
    position: relative; z-index:1; background: rgba(0,0,0,0.5);
    padding: 40px; border-radius: 12px; width: 380px;
  }

  h2 { font-size: 2.5rem; margin-bottom: 10px; text-align: center; color: #ffd700; }
  h3 { font-size: 1.2rem; margin-bottom: 30px; text-align: center; color: #fff; }

  input[type="text"], input[type="password"] { 
    width:100%; padding:12px; margin-bottom:20px; border:none; 
    border-bottom:2px solid #ffd700; background:rgba(255,255,255,0.15); 
    color:#fff; font-size:1rem; outline:none; border-radius:6px; transition:0.3s;
  }
  input:focus { border-bottom:2px solid #fff; box-shadow:0 0 15px rgba(255,255,200,0.4); }

  button { width:100%; padding:14px; background:linear-gradient(90deg,#ffd700,#fff);
    border:none; border-radius:8px; font-size:1.1rem; font-weight:700; color:#333; cursor:pointer; transition:0.3s;
    box-shadow:0 4px 15px rgba(255,215,0,0.4);}
  button:hover { transform:translateY(-3px); box-shadow:0 8px 25px rgba(255,255,150,0.6); }

  .toggle, .toggleAdmin { text-align:center; margin-top:10px; cursor:pointer; color:#ffd700; }
  .toggle:hover, .toggleAdmin:hover { text-decoration: underline; }

  .error { color: #ff6666; font-size: 0.9rem; margin-top:-15px; margin-bottom:15px; text-align:center; }
  #isAdminCheck { margin-bottom:20px; }
</style>

</head>
<body>

<div class="container">
  <h2 id="formTitle">Login</h2>
  <h3 id="formSubtitle">Access your journey!</h3>

  <!-- Login Form -->

  <div id="loginForm">
    <input type="text" id="loginUsername" placeholder="Username">
    <input type="password" id="loginPassword" placeholder="Password">
    <label><input type="checkbox" id="isAdminCheck"> Are you admin?</label>
    <div class="error" id="loginError"></div>
    <button onclick="login()">Login</button>
  </div>

  <!-- Signup Form -->

  <div id="signupForm" style="display:none;">
    <input type="text" id="signupUsername" placeholder="Username">
    <div class="error" id="usernameError"></div>
    <input type="password" id="signupPassword" placeholder="Password">
    <input type="password" id="signupConfirmPassword" placeholder="Confirm Password">
    <button onclick="signup()">Signup</button>
  </div>

  <div class="toggle" id="toggleForm" onclick="toggleForms()">Don't have an account? Signup</div>
</div>

<script>
  function toggleForms() {
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const formTitle = document.getElementById('formTitle');
    const formSubtitle = document.getElementById('formSubtitle');
    const toggleText = document.getElementById('toggleForm');
    document.getElementById('loginError').textContent = '';
    document.getElementById('usernameError').textContent = '';

    if (loginForm.style.display === "none") {
      loginForm.style.display = "block";
      signupForm.style.display = "none";
      formTitle.textContent = "Login";
      formSubtitle.textContent = "Access your journey!";
      toggleText.textContent = "Don't have an account? Signup";
    } else {
      loginForm.style.display = "none";
      signupForm.style.display = "block";
      formTitle.textContent = "Signup";
      formSubtitle.textContent = "Create your account!";
      toggleText.textContent = "Already have an account? Login";
    }
  }

  function signup() {
    const username = document.getElementById('signupUsername').value.trim();
    const password = document.getElementById('signupPassword').value.trim();
    const confirmPassword = document.getElementById('signupConfirmPassword').value.trim();
    const usernameError = document.getElementById('usernameError');

    if (!/^[A-Za-z]+$/.test(username)) {
      usernameError.textContent = "Username can contain letters only (no numbers or symbols)";
      return;
    } else {
      usernameError.textContent = "";
    }

    if (!password || !confirmPassword) {
      alert("Please enter and confirm password");
      return;
    }
    if (password !== confirmPassword) {
      alert("Passwords do not match!");
      return;
    }

    let users = JSON.parse(localStorage.getItem('users') || '{}');
    if (users[username]) {
      alert("Username already exists!");
      return;
    }
    users[username] = password;
    localStorage.setItem('users', JSON.stringify(users));

    alert("Signup successful! Please login with your new account.");
    toggleForms();
  }

  function login() {
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    const loginError = document.getElementById('loginError');
    const isAdmin = document.getElementById('isAdminCheck').checked;

    if (!username || !password) {
      loginError.textContent = "Please enter username and password";
      return;
    }

    if(isAdmin) {
      const adminUsername = "admin"; // Change admin username if needed
      const adminPassword = "admin123"; // Change admin password if needed

      if(username === adminUsername && password === adminPassword){
        localStorage.setItem("loggedRole", "admin");
        window.location.href = "admin.html"; // admin panel
      } else {
        loginError.textContent = "Incorrect admin username or password!";
      }
    } else {
      let users = JSON.parse(localStorage.getItem('users') || '{}');
      if(users[username] && users[username] === password){
        localStorage.setItem("loggedRole", "user");
        window.location.href = "dashboard.html"; // user dashboard
      } else {
        loginError.textContent = "Incorrect username or password!";
      }
    }
  }
</script>

</body>
</html>
